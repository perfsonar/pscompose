<div class="homepage" role="main" aria-label="pSCompose Homepage">
    <header role="banner" aria-labelledby="getting-started-heading">
        <h1 id="getting-started-heading">Getting Started</h1>
        <p class="getting-started-p" id="welcome-text">
            Welcome to pSCompose!
            <br />
            Are you starting a template from scratch? Start by entering hosts.
            <br />
            Do you need to import an existing template?
        </p>
    </header>
    
    <ul class="getting-started-boxes" aria-label="Template creation options">
        <li class="list-box">
            <div class="box-header">
                <i class="lucide" style="color: var(--copy-color)" data-lucide="locate" aria-hidden="true"></i>
                <h4 class="box-name">Import Template</h4>
                <web-button
                    link="/import/1/import_template/"
                    theme="Icon-Success"
                    righticon="arrow-right"
                    aria-label="Import an existing template"
                ></web-button>
            </div>
            <p class="box-text">
                Import an existing template json by uploading the file or copying and pasting the json directly.
                <br />
                You can make edits as needed once imported
            </p>
        </li>

        <li class="list-box">
            <div class="box-header">
                <i class="lucide" data-lucide="plus" aria-hidden="true"></i>
                <h4 class="box-name">Create New Template</h4>
                <web-button
                    link="wizard/1/addresses/"
                    theme="Icon-Success"
                    righticon="arrow-right"
                    aria-label="Create a new template from scratch"
                ></web-button>
            </div>
            <p class="box-text">
                This will walk you through creating a new template from scratch
            </p>
        </li>
    </ul>

    <section class='published-templates' aria-labelledby="published-templates-heading">
        <h3 id="published-templates-heading">Published Templates</h3>
        <table aria-label="Published Templates Table">
            <thead>
                <tr>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="locate" aria-hidden="true"></i>
                            <span>Template Name</span>
                        </div>
                    </th>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="clipboard-list" aria-hidden="true"></i>
                            <span>Tasks</span>
                        </div>
                    </th>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="timer-reset" aria-hidden="true"></i>
                            <span>Interval</span>
                        </div>
                    </th>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="hard-drive-download" aria-hidden="true"></i>
                            <span>Test Members</span>
                        </div>
                    </th>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="check-circle-2" aria-hidden="true"></i>
                            <span>Enabled</span>
                        </div>
                    </th>
                    <th scope="col">
                        <div class="th-content">
                            <i class="lucide" data-lucide="file-edit" aria-hidden="true"></i>
                            <span>Actions</span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody
                nunjucks-array-template="published-templates-tbody"
            >
            </tbody>
        </table>
    </section>
</div>

<script id="published-templates-tbody" type="nunjucks">
    {% if data and data.length > 0 %}
        {% for item in data %}
            <tr>
                <td class="td-content">{{item.name}}</td>
                <td class="td-content">{{item.tasks}}</td>
                <td class="td-content">{{item.interval}}</td>
                <td class="td-content">{{item.host_members}}</td>
                <td>
                {% if item.enabled? %}
                <i class="lucide" data-lucide="check-circle-2" style="height: 24; color: var(--success-color)" aria-hidden="true"></i>
                {% else %}
                <i class="lucide" data-lucide="check-circle-2" style="height: 24; color: var(--copyAlt-color)" aria-hidden="true"></i>
                {% endif %}
                </td>
                <td> 
                <div class="action-icons">
                    <i class="lucide" data-lucide="settings" style="height: 24;" aria-hidden="true"></i>
                    <i class="lucide" data-lucide="trash-2" style="height: 24;" aria-hidden="true"></i>
                </div>
                </td>
            </tr> 
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="6" style="text-align: center; color: var(--copyAlt-color); padding: 1em;">
                <p> No published templates </p>
            </td>
        </tr>
    {% endif %}
</script>
<script>
    // api call for published templates table
    const table = document.querySelector('tbody');
    table.setAttribute('hx-get', psCompose.metadata['templates'].list_endpoint);
    table.setAttribute("hx-trigger", "load");
    htmx.process(table)
</script>

<!-- need to update published templated td-content accordingly -->
